CREATE SCHEMA IF NOT EXISTS `ADDRESS_MGT` DEFAULT CHARACTER SET utf8;

USE `ADDRESS_MGT`;

DROP TABLE IF EXISTS `ADDRESS_MGT`.`DETAILS`;

CREATE TABLE `ADDRESS_MGT`.`DETAILS` (
  `ID` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,

  -- Persistent columns --
  `NAME` VARCHAR(10) NOT NULL,

  -- Relational columns --
  `CITY_ID` BIGINT UNSIGNED,
  `PARENT_ID` BIGINT UNSIGNED,

  -- Constraint --
  CONSTRAINT `FK_CITY_ID` FOREIGN KEY (`CITY_ID`) REFERENCES `ADDRESS_MGT`.`CITIES` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_PARENT_ID` FOREIGN KEY (`PARENT_ID`) REFERENCES `ADDRESS_MGT`.`DETAILS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  PRIMARY KEY (`ID`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
